<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>PT åœ‹è€ƒå…¨æ”»ç•¥è³‡æ–™åº« (Pro)</title>
<style>
:root{
  --bg: #f8fafc; 
  --sidebar-bg: #1e293b; 
  --sidebar-text: #e2e8f0;
  --card: #ffffff; 
  --text: #334155; 
  --border: #e2e8f0;
  
  /* Subject Colors */
  --ortho: #3b82f6;     /* éª¨ç§‘è— */
  --neuro: #8b5cf6;     /* ç¥ç¶“ç´« */
  --cardio: #ef4444;    /* å¿ƒè‚ºç´… */
  --peds: #f97316;      /* å°å…’æ©˜ */
  --modality: #059669;  /* å„€å™¨ç¶  */
  --assistive: #db2777; /* è¼”å…·ç²‰ */
  --biomech: #4b5563;   /* åŠ›å­¸ç° */
  
  --radius: 12px;
  --header-h: 60px;
  --sidebar-w: 260px;
}

*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Microsoft JhengHei", sans-serif; margin:0; background:var(--bg); color:var(--text); height:100vh; overflow:hidden;}

/* --- Layout --- */
.app-container{display:flex; height:100vh;}
.main{flex:1; display:flex; flex-direction:column; background:var(--bg); overflow:hidden; position:relative;}
.header-bar{
  height:var(--header-h); background:#fff; display:flex; align-items:center; padding:0 16px; 
  border-bottom:1px solid #eee; position:sticky; top:0; z-index:30; justify-content: space-between;
}
.content-area{flex:1; overflow-y:auto; padding:20px; scroll-behavior:smooth;}

/* --- Sidebar --- */
.sidebar{
  width:var(--sidebar-w); background:var(--sidebar-bg); color:var(--sidebar-text);
  display:flex; flex-direction:column; flex-shrink:0; transition: transform 0.3s ease;
  z-index: 50;
}
.sidebar-header{padding:20px; border-bottom:1px solid rgba(255,255,255,0.1); font-weight:800; font-size:18px; color:#fff;}
.nav-scroll{overflow-y:auto; flex:1; padding:10px 0;}
.nav-item{padding:12px 20px; cursor:pointer; font-size:14px; display:flex; align-items:center; gap:10px; transition:0.2s; border-left:3px solid transparent; color:rgba(255,255,255,0.7);}
.nav-item:hover{background:rgba(255,255,255,0.05); color:#fff;}
.nav-section{font-size:11px; font-weight:700; color:rgba(255,255,255,0.4); padding:15px 20px 5px; text-transform:uppercase; letter-spacing:1px;}

/* --- Mobile Toggle --- */
.menu-overlay{position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.5); z-index:40; display:none;}
.menu-btn{cursor:pointer; font-size:20px; padding:5px; display:none;} /* Default hidden on desktop */

/* --- Views: Home Grid --- */
.home-container{max-width:900px; margin:0 auto; width:100%; animation: fadeIn 0.3s ease;}
.hero-title{font-size:28px; font-weight:800; margin-bottom:24px; text-align:center; color:#1e293b;}
.grid-main{display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-bottom:30px;}
.grid-sub{display:grid; grid-template-columns:repeat(auto-fill, minmax(140px, 1fr)); gap:12px;}

.subject-card{
  background:#fff; border-radius:var(--radius); padding:24px; cursor:pointer;
  border:1px solid var(--border); transition:0.2s; display:flex; flex-direction:column; align-items:center; text-align:center;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
}
.subject-card:hover{transform:translateY(-4px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);}
.icon-box{width:50px; height:50px; border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:24px; margin-bottom:12px; color:#fff;}
.subj-title{font-size:18px; font-weight:700;}
.subj-desc{font-size:13px; color:#64748b; margin-top:4px;}

/* --- Views: Category List --- */
.cat-header{display:flex; align-items:center; gap:10px; margin-bottom:20px;}
.back-btn{padding:6px 16px; border-radius:20px; border:1px solid #ccc; background:#fff; cursor:pointer; font-size:13px; display:flex; align-items:center; gap:4px;}
.back-btn:hover{background:#f1f5f9;}
.topic-grid{display:grid; grid-template-columns:1fr; gap:12px; animation: fadeIn 0.3s ease;}
.topic-btn{
  background:#fff; padding:16px; border-radius:8px; border:1px solid var(--border); cursor:pointer;
  display:flex; justify-content:space-between; align-items:center; transition:0.2s;
  box-shadow: 0 2px 4px rgba(0,0,0,0.02);
}
.topic-btn:hover{border-color:var(--text); background:#f8fafc;}
.topic-title{font-weight:700; font-size:16px; color:var(--text);}
.topic-tags{font-size:12px; color:#64748b; margin-top:4px;}

/* --- Views: Content Detail --- */
.detail-view{max-width:800px; margin:0 auto; background:#fff; padding:30px; border-radius:var(--radius); border:1px solid var(--border); animation: slideUp 0.3s ease;}
.detail-title{font-size:28px; font-weight:800; margin-bottom:10px; color:var(--text);}
.badge{padding:4px 8px; border-radius:4px; font-size:12px; font-weight:700; color:#fff; display:inline-block; margin-right:4px;}

/* Content Styling */
.section-title{font-size:18px; font-weight:700; margin:24px 0 12px 0; border-bottom:2px solid #f1f5f9; padding-bottom:8px; color:var(--text);}
table{width:100%; border-collapse:collapse; margin-bottom:15px; font-size:15px;}
th{background:#f8fafc; padding:10px; text-align:left; color:#475569; font-weight:700; border-bottom:2px solid #e2e8f0;}
td{border-bottom:1px solid #f1f5f9; padding:10px;}
tr:last-child td{border-bottom:none;}

.red-flag{background:#fef2f2; border-left:4px solid #ef4444; padding:15px; margin:15px 0; color:#991b1b; border-radius:0 4px 4px 0;}
.exam-tip{background:#fffbeb; border-left:4px solid #f59e0b; padding:15px; margin:15px 0; color:#92400e; border-radius:0 4px 4px 0;}
.concept-box{background:#eff6ff; border:1px solid #dbeafe; padding:15px; border-radius:6px; margin:15px 0; color:#1e3a8a;}
ul, ol{padding-left:20px; line-height:1.7;}
li{margin-bottom:6px;}

@keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
@keyframes slideUp { from { transform:translateY(10px); opacity:0; } to { transform:translateY(0); opacity:1; } }

/* Mobile Responsive */
@media(max-width: 900px){
  .sidebar{position:fixed; left:-100%; height:100%; box-shadow:4px 0 20px rgba(0,0,0,0.2);}
  .sidebar.open{left:0;}
  .menu-overlay.open{display:block;}
  .menu-btn{display:block;}
  .grid-main{grid-template-columns:1fr;}
  .topic-grid{grid-template-columns:1fr;}
  .detail-view{padding:20px; border:none;}
}
@media(min-width: 901px){
  .topic-grid{grid-template-columns:1fr 1fr;}
  .menu-btn{display:none;} /* Hide hamburger on desktop */
}
</style>
</head>
<body>

<div class="menu-overlay" onclick="closeSidebar()"></div>

<div class="app-container">
  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">PT åœ‹è€ƒè³‡æ–™åº«</div>
    <div class="nav-scroll">
      <div class="nav-item" onclick="renderHome()">ğŸ  å›é¦–é  (Home)</div>
      
      <div class="nav-section">å››å¤§ä¸»ç§‘</div>
      <div class="nav-item" onclick="renderCategory('ortho')"><span style="color:var(--ortho)">ğŸ¦´</span> éª¨ç§‘ç‰©ç†æ²»ç™‚</div>
      <div class="nav-item" onclick="renderCategory('neuro')"><span style="color:var(--neuro)">ğŸ§ </span> ç¥ç¶“ç‰©ç†æ²»ç™‚</div>
      <div class="nav-item" onclick="renderCategory('cardio')"><span style="color:var(--cardio)">ğŸ«€</span> å¿ƒè‚ºç‰©ç†æ²»ç™‚</div>
      <div class="nav-item" onclick="renderCategory('peds')"><span style="color:var(--peds)">ğŸ‘¶</span> å°å…’ç‰©ç†æ²»ç™‚</div>
      
      <div class="nav-section">é€²éšç§‘ç›®</div>
      <div class="nav-item" onclick="renderCategory('modality')"><span style="color:var(--modality)">âš¡</span> å„€å™¨èˆ‡ç‰©ç†å› å­</div>
      <div class="nav-item" onclick="renderCategory('assistive')"><span style="color:var(--assistive)">ğŸ¦½</span> è¼”å…·èˆ‡ç§‘æŠ€</div>
      <div class="nav-item" onclick="renderCategory('biomech')"><span style="color:var(--biomech)">ğŸš¶</span> ç”Ÿç‰©åŠ›å­¸</div>
    </div>
  </aside>

  <!-- Main Area -->
  <main class="main">
    <div class="header-bar">
      <div style="display:flex; align-items:center; gap:10px;">
        <div class="menu-btn" onclick="toggleSidebar()">â˜°</div>
        <div style="font-weight:700; color:var(--text);">PT National Exam Hub</div>
      </div>
      <button class="back-btn" onclick="toggleTheme()">â— æ¨¡å¼</button>
    </div>
    <div class="content-area" id="mainContent">
      <!-- Content Loaded Here -->
    </div>
  </main>
</div>

<script>
// ===========================================
//  è³‡æ–™åº«æ ¸å¿ƒ (Database Core)
// ===========================================
const database = [
  // --- éª¨ç§‘ (Magee Complete) ---
  { id: 'magee-cervical', cat: 'ortho', title: 'Magee: é ¸æ¤ç‰¹æ®Šæ¸¬è©¦', tags: ['VBI', 'ä¸Šé ¸æ¤', 'ç¥ç¶“æ ¹'], content: `
    <div class="exam-tip">ğŸ’¡ Magee é‡é»ï¼šä¸Šé ¸æ¤ä¸ç©©æ˜¯çµ•å°ç¦å¿Œç—‡ï¼Œæ²»ç™‚å‰å¿…æ¸¬ï¼</div>
    <div class="section-title">1. ä¸Šé ¸æ¤ä¸ç©©å®š (Upper C-Spine)</div>
    <table><tr><th>æ¸¬è©¦</th><th>æ§‹é€ </th><th>é™½æ€§</th></tr><tr><td>Sharp-Purser</td><td>æ©«éŸŒå¸¶</td><td>C2 å¾Œæ»‘/ç—‡ç‹€æ¸›è¼•</td></tr><tr><td>Alar Ligament</td><td>ç¿¼ç‹€éŸŒå¸¶</td><td>å´å½æ™‚ C2 æ²’å‹•</td></tr></table>
    <div class="section-title">2. æ¤åŸºåº•å‹•è„ˆ (VBI)</div>
    <p><b>5D3N:</b> Dizziness, Diplopia, Dysphagia, Drop attack, Dysarthria + Nystagmus, Nausea, Numbness.</p>
    <div class="section-title">3. ç¥ç¶“æ ¹ (Radiculopathy)</div>
    <table><tr><th>æ¸¬è©¦</th><th>å‹•ä½œ</th></tr><tr><td>Spurling's</td><td>å´å½ä¸‹å£“ (ç—›)</td></tr><tr><td>Distraction</td><td>ä¸Šæ (æ¸›ç·©)</td></tr><tr><td>Bakody's</td><td>æ‰‹æ”¾é ­ä¸Š (C4-5 æ¸›ç·©)</td></tr></table>
  `},
  { id: 'magee-shoulder', cat: 'ortho', title: 'Magee: è‚©é—œç¯€ç‰¹æ®Šæ¸¬è©¦', tags: ['å¤¾æ“ ', 'RCT', 'SLAP'], content: `
    <div class="section-title">1. å¤¾æ“  (Impingement)</div>
    <ul><li><b>Neer's:</b> è¢«å‹•å±ˆæ›²åˆ°åº•ã€‚</li><li><b>Hawkins-Kennedy:</b> å±ˆæ›²90åº¦+å…§è½‰ã€‚</li><li><b>Painful Arc:</b> 60-120åº¦ç–¼ç—›ã€‚</li></ul>
    <div class="section-title">2. æ—‹è½‰è‚Œè¢– (Rotator Cuff)</div>
    <table><tr><th>è‚Œè‚‰</th><th>æ¸¬è©¦</th></tr><tr><td>Supraspinatus</td><td>Empty Can / Drop Arm</td></tr><tr><td>Infraspinatus</td><td>ER Lag Sign</td></tr><tr><td>Subscapularis</td><td>Lift-off / Belly Press</td></tr></table>
    <div class="section-title">3. é—œç¯€å”‡ (SLAP)</div>
    <p><b>O'Brien's:</b> å…§è½‰ç—› > å¤–è½‰ç—›ã€‚ <b>Speed's:</b> æŠ—é˜»å±ˆæ›²ç—›ã€‚</p>
  `},
  { id: 'magee-elbow', cat: 'ortho', title: 'Magee: è‚˜é—œç¯€ç‰¹æ®Šæ¸¬è©¦', tags: ['ç¶²çƒè‚˜', 'éŸŒå¸¶'], content: `
    <div class="section-title">1. ä¸Šé«ç‚</div>
    <ul><li><b>Cozen's:</b> æŠ—é˜» Wrist Ext (ç¶²çƒè‚˜)ã€‚</li><li><b>Golfer's:</b> è¢«å‹• Wrist Ext + Supination (é«˜çˆ¾å¤«çƒè‚˜)ã€‚</li></ul>
    <div class="section-title">2. éŸŒå¸¶</div>
    <p><b>Valgus Stress:</b> MCL (æŠ•æ‰‹)ã€‚ <b>Varus Stress:</b> LCLã€‚</p>
  `},
  { id: 'magee-wrist', cat: 'ortho', title: 'Magee: è…•æ‰‹ç‰¹æ®Šæ¸¬è©¦', tags: ['CTS', 'åª½åª½æ‰‹'], content: `
    <div class="section-title">å¸¸è¦‹ç—…è®Š</div>
    <table><tr><th>ç—…ç—‡</th><th>æ¸¬è©¦</th><th>å‹•ä½œ</th></tr><tr><td>è…•éš§é“</td><td>Phalen's</td><td>å±ˆè…•1åˆ†é˜</td></tr><tr><td>åª½åª½æ‰‹</td><td>Finkelstein</td><td>æ¡æ‹³å°ºå</td></tr><tr><td>TFCC</td><td>TFCC Load</td><td>æ“ å£“å°ºåæ—‹è½‰</td></tr><tr><td>å°ºç¥ç¶“</td><td>Froment's</td><td>æç´™æ‹‡æŒ‡å±ˆæ›²</td></tr></table>
  `},
  { id: 'magee-lumbar', cat: 'ortho', title: 'Magee: è…°æ¤èˆ‡éª¨ç›†', tags: ['HIVD', 'SIJ Cluster'], content: `
    <div class="section-title">1. ç¥ç¶“å¼µåŠ›</div>
    <ul><li><b>SLR:</b> 35-70åº¦ç—› (åéª¨ç¥ç¶“)ã€‚</li><li><b>Slump:</b> é§èƒŒè¸¢è…¿ (ç¡¬è„Šè†œ)ã€‚</li><li><b>Femoral N.:</b> è¶´å§¿å±ˆè† (è‚¡ç¥ç¶“)ã€‚</li></ul>
    <div class="section-title">2. SIJ Laslett Cluster (3/5 é™½æ€§)</div>
    <ol><li>Distraction</li><li>Compression</li><li>Thigh Thrust (P4)</li><li>Sacral Thrust</li><li>Gaenslen's</li></ol>
  `},
  { id: 'magee-hip', cat: 'ortho', title: 'Magee: é«–é—œç¯€ç‰¹æ®Šæ¸¬è©¦', tags: ['Thomas', 'Ober'], content: `
    <div class="section-title">æ”£ç¸®æ¸¬è©¦</div>
    <table><tr><th>æ¸¬è©¦</th><th>è‚Œè‚‰</th></tr><tr><td>Thomas</td><td>Iliopsoas/Rectus</td></tr><tr><td>Ober's</td><td>IT Band</td></tr><tr><td>Ely's</td><td>Rectus Femoris</td></tr></table>
    <div class="section-title">é—œç¯€å…§</div>
    <p><b>FABER:</b> è…¹è‚¡æºç—›=Hipï¼Œå¾Œå´ç—›=SIJã€‚ <b>Scour:</b> ç ”ç£¨æ¸¬ OA/Labrumã€‚</p>
  `},
  { id: 'magee-knee', cat: 'ortho', title: 'Magee: è†é—œç¯€ç‰¹æ®Šæ¸¬è©¦', tags: ['ACL', 'Meniscus'], content: `
    <div class="concept-box">ACL é»ƒé‡‘æ¨™æº–ï¼šLachman Testã€‚</div>
    <div class="section-title">1. éŸŒå¸¶</div>
    <ul><li><b>ACL:</b> Lachman, Anterior Drawer, Pivot Shiftã€‚</li><li><b>PCL:</b> Posterior Sag (Godfrey)ã€‚</li><li><b>MCL/LCL:</b> Valgus / Varus Stressã€‚</li></ul>
    <div class="section-title">2. åŠæœˆæ¿</div>
    <p><b>McMurray:</b> æ—‹è½‰ä¼¸ç›´ã€‚ <b>Thessaly:</b> å–®è…³ç«™æ—‹è½‰ã€‚ <b>Apley's:</b> è¶´å§¿ç ”ç£¨ã€‚</p>
  `},
  { id: 'magee-ankle', cat: 'ortho', title: 'Magee: è¸è¶³ç‰¹æ®Šæ¸¬è©¦', tags: ['ATFL', 'Achilles'], content: `
    <div class="section-title">éŸŒå¸¶æ‰­å‚·</div>
    <table><tr><th>éŸŒå¸¶</th><th>æ¸¬è©¦</th></tr><tr><td>ATFL</td><td>Ant. Drawer</td></tr><tr><td>CFL</td><td>Talar Tilt (Inv)</td></tr><tr><td>Syndesmosis</td><td>Kleiger's (ER)</td></tr></table>
    <div class="section-title">å…¶ä»–</div>
    <p><b>Thompson:</b> é˜¿åŸºé‡Œæ–¯è…±æ–·è£‚ã€‚ <b>Homan's:</b> DVTã€‚</p>
  `},

  // --- ç¥ç¶“ ---
  { id: 'neuro-stroke', cat: 'neuro', title: 'è…¦ä¸­é¢¨ Brunnstrom åˆ†æœŸ', tags: ['CVA', 'Synergy'], content: `
    <div class="section-title">Brunnstrom Recovery Stages</div>
    <table><tr><th>Stage</th><th>ç‰¹å¾µ</th></tr><tr><td>I</td><td>è»Ÿç™± (Flaccidity)</td></tr><tr><td>II</td><td>è¯åˆåæ‡‰ï¼ŒSynergy å¾®ç¾</td></tr><tr><td>III</td><td>å¼µåŠ›æœ€å¼·ï¼Œå¯éš¨æ„ Synergy</td></tr><tr><td>IV</td><td>æ‰“ç ´å”åŒï¼Œéƒ¨åˆ†åˆ†é›¢</td></tr><tr><td>V</td><td>åˆ†é›¢å‹•ä½œï¼Œå¼µåŠ›ä¸‹é™</td></tr><tr><td>VI</td><td>æ¥è¿‘æ­£å¸¸</td></tr></table>
    <div class="concept-box"><b>ä¸Šè‚¢ Flexor Synergy:</b> Scapula elevation/retraction, Shoulder Abd/ER, Elbow Flex, Supination.</div>
  `},
  { id: 'neuro-sci', cat: 'neuro', title: 'è„Šé«“æå‚· (SCI) ç—‡å€™ç¾¤', tags: ['ASIA', 'Autonomic'], content: `
    <div class="section-title">ä¸å®Œå…¨æå‚·</div>
    <table><tr><th>ç—‡å€™ç¾¤</th><th>ç‰¹å¾µ</th></tr><tr><td>Central Cord</td><td>ä¸Šè‚¢åš´é‡ > ä¸‹è‚¢ (èµ°è·¯åƒæ®­å±)</td></tr><tr><td>Brown-Sequard</td><td>åŒå´æœ¬é«”å–ªå¤± / å°å´ç—›æº«å–ªå¤±</td></tr><tr><td>Anterior Cord</td><td>é‹å‹•å–ªå¤± / æœ¬é«”æ„Ÿè¦ºä¿ç•™</td></tr></table>
    <div class="red-flag"><b>Autonomic Dysreflexia (è‡ªä¸»ç¥ç¶“åå°„ç•°å¸¸):</b><br>T6 ä»¥ä¸Šæå‚·ï¼Œè¡€å£“æ€¥å‡ã€é ­ç—›ã€ç›œæ±—ã€‚<b>è™•ç½®ï¼šç«‹åˆ»åèµ· (å§¿å‹¢æ€§é™å£“)ã€‚</b></div>
  `},

  // --- å¿ƒè‚º ---
  { id: 'cardio-ekg', cat: 'cardio', title: 'å¿ƒé›»åœ–åˆ¤è®€èˆ‡ ACLS', tags: ['EKG', 'Arrhythmia'], content: `
    <div class="red-flag"><b>PT å¿…çŸ¥è‡´å‘½å¿ƒå¾‹ (Stop Treatment):</b><br>1. VF (å¿ƒå®¤é¡«å‹•)<br>2. VT (å¿ƒå®¤é »è„ˆ) ç„¡è„ˆæ<br>3. Asystole (ä¸€ç›´ç·š)</div>
    <div class="section-title">æ³¢å½¢æ„ç¾©</div>
    <ul><li><b>P wave:</b> å¿ƒæˆ¿å»æ¥µåŒ– (Afib æ™‚æ¶ˆå¤±)ã€‚</li><li><b>QRS:</b> å¿ƒå®¤å»æ¥µåŒ– (å¯¬å¤§ä»£è¡¨ PVC)ã€‚</li><li><b>T wave:</b> å¿ƒå®¤å†æ¥µåŒ– (é«˜å°–=é«˜è¡€é‰€)ã€‚</li></ul>
  `},
  { id: 'cardio-rehab', cat: 'cardio', title: 'å¿ƒè‡Ÿå¾©å¥ Phase I', tags: ['METs', 'Inpatient'], content: `
    <div class="section-title">ä½é™¢æœŸ (Phase I)</div>
    <ul>
      <li><b>ç›®æ¨™:</b> æ—©æœŸæ´»å‹•ï¼Œè¡›æ•™ï¼Œé¿å…è‡¥åºŠã€‚</li>
      <li><b>å¼·åº¦:</b> RPE < 13ï¼ŒHR < Resting + 20 (MI) / 30 (Surgery)ã€‚</li>
    </ul>
    <div class="concept-box"><b>METs å°ç…§:</b><br>1-2: åƒé£¯ã€ç©¿è¡£ã€‚<br>3-4: å¹³åœ°è¡Œèµ°ã€æ·‹æµ´ã€‚<br>5-6: æ€§è¡Œç‚ºã€æ…¢è·‘ã€‚</div>
  `},

  // --- å°å…’ ---
  { id: 'peds-dev', cat: 'peds', title: 'å…’ç«¥ç™¼å±•é‡Œç¨‹ç¢‘', tags: ['Milestone', 'Reflex'], content: `
    <div class="exam-tip">å£è¨£ï¼šé ­ -> é ¸ -> è»€å¹¹ -> å››è‚¢</div>
    <table><tr><th>æœˆé½¡</th><th>èƒ½åŠ›</th></tr><tr><td>4m</td><td>ç¿»èº« (Roll over)</td></tr><tr><td>6m</td><td>ç¨ç«‹å (Sit)</td></tr><tr><td>8m</td><td>è…¹çˆ¬ (Commando crawl)</td></tr><tr><td>10m</td><td>å››é»çˆ¬ (Creeping)</td></tr><tr><td>12m</td><td>æ”¾æ‰‹èµ° (Walk)</td></tr></table>
  `},
  { id: 'peds-cp', cat: 'peds', title: 'è…¦æ€§éº»ç—º GMFCS åˆ†ç´š', tags: ['CP', 'GMFCS'], content: `
    <div class="section-title">GMFCS (6-12æ­²)</div>
    <ul>
      <li><b>Level I:</b> è·‘è·³è‡ªå¦‚ï¼Œä¸éœ€æ‰¶æ‰‹ã€‚</li>
      <li><b>Level II:</b> æˆ¶å¤–é•·è·é›¢éœ€è¼”å…·ï¼Œèµ°æ¨“æ¢¯éœ€æ‰¶æ‰‹ã€‚</li>
      <li><b>Level III:</b> å®¤å…§éœ€æ‰‹æŒè¼”å…·ï¼Œæˆ¶å¤–è¼ªæ¤…ã€‚</li>
      <li><b>Level IV:</b> é›»å‹•è¼ªæ¤… (å¯æ“ä½œ)ã€‚</li>
      <li><b>Level V:</b> å®Œå…¨ä¾è³´ã€‚</li>
    </ul>
  `},

  // --- å„€å™¨ ---
  { id: 'mod-tens', cat: 'modality', title: 'é›»ç™‚åƒæ•¸ TENS', tags: ['æ­¢ç—›', 'Gate Control'], content: `
    <div class="section-title">TENS æ¨¡å¼æ¯”è¼ƒ</div>
    <table><tr><th>æ¨¡å¼</th><th>é »ç‡</th><th>æ©Ÿè½‰</th></tr><tr><td>é«˜é » (Conventional)</td><td>80-120Hz</td><td>Gate Control (å¿«ç”¢å¿«æ¶ˆ)</td></tr><tr><td>ä½é » (Acupuncture)</td><td>1-10Hz</td><td>Opiate (æ…¢ç”¢æ…¢æ¶ˆ)</td></tr><tr><td>Brief Intense</td><td>é«˜é »</td><td>é˜»æ–· (æ¸…å‰µç”¨)</td></tr></table>
  `},

  // --- è¼”å…· ---
  { id: 'at-wheel', cat: 'assistive', title: 'è¼ªæ¤…æ¸¬é‡èˆ‡é©é…', tags: ['Wheelchair', 'å£“ç˜¡'], content: `
    <div class="red-flag">æ¸¬é‡éŒ¯èª¤å¾Œæœåš´é‡ï¼</div>
    <table><tr><th>éƒ¨ä½</th><th>æ¸¬é‡</th><th>éŒ¯èª¤å¾Œæœ</th></tr><tr><td>å¯¬åº¦</td><td>è‡€å¯¬ + 2å‹</td><td>çª„: å£“å¤§è½‰å­ / å¯¬: è„Šæ¤å´å½</td></tr><tr><td>æ·±åº¦</td><td>è‡€å¾Œè‡³è†•çª© - 2å‹</td><td>æ·±: å£“è†•çª© / æ·º: å£“åŠ›é›†ä¸­åéª¨</td></tr><tr><td>æ‰¶æ‰‹é«˜</td><td>è‚˜å±ˆ90 + 1å‹</td><td>é«˜: è³è‚© / ä½: å‚¾æ–œ</td></tr></table>
  `},

  // --- ç”Ÿç‰©åŠ›å­¸ ---
  { id: 'bio-gait', cat: 'biomech', title: 'ç•°å¸¸æ­¥æ…‹åˆ†æ', tags: ['Trendelenburg', 'Gait'], content: `
    <div class="section-title">å¸¸è¦‹ç•°å¸¸</div>
    <ul>
      <li><b>Trendelenburg:</b> è‡€ä¸­è‚Œç„¡åŠ›ï¼Œéª¨ç›†æ‰å‘å¥å´ï¼Œèº«æ­ªå‘æ‚£å´ã€‚</li>
      <li><b>Gluteus Maximus:</b> è…³è·Ÿè‘—åœ°èº«é«”å¾Œä»° (Rocking horse)ã€‚</li>
      <li><b>Quadriceps:</b> èº«é«”å‰å‚¾æ‰‹å£“å¤§è…¿ã€‚</li>
      <li><b>Steppage:</b> å‚è¶³ (Drop foot)ã€‚</li>
      <li><b>Scissoring:</b> å‰ªåˆ€è…³ (å¼µåŠ›å¼·)ã€‚</li>
    </ul>
  `}
];

// ===========================================
//  é‚è¼¯æ§åˆ¶ (Application Logic)
// ===========================================
const mainArea = document.getElementById('mainContent');
const sidebar = document.getElementById('sidebar');
const menuOverlay = document.querySelector('.menu-overlay');

const categories = {
  ortho: { name: 'éª¨ç§‘ç‰©ç†æ²»ç™‚', color: 'var(--ortho)', icon: 'ğŸ¦´' },
  neuro: { name: 'ç¥ç¶“ç‰©ç†æ²»ç™‚', color: 'var(--neuro)', icon: 'ğŸ§ ' },
  cardio: { name: 'å¿ƒè‚ºç‰©ç†æ²»ç™‚', color: 'var(--cardio)', icon: 'ğŸ«€' },
  peds: { name: 'å°å…’ç‰©ç†æ²»ç™‚', color: 'var(--peds)', icon: 'ğŸ‘¶' },
  modality: { name: 'ç‰©ç†å› å­èˆ‡å„€å™¨', color: 'var(--modality)', icon: 'âš¡' },
  assistive: { name: 'è¼”å…·èˆ‡ç§‘æŠ€', color: 'var(--assistive)', icon: 'ğŸ¦½' },
  biomech: { name: 'ç”Ÿç‰©åŠ›å­¸', color: 'var(--biomech)', icon: 'ğŸš¶' }
};

function renderHome() {
  mainArea.innerHTML = `
    <div class="home-container">
      <div class="hero-title">PT åœ‹è€ƒå…¨æ”»ç•¥è³‡æ–™åº«</div>
      
      <div style="font-size:14px; font-weight:700; color:#94a3b8; margin-bottom:12px;">å››å¤§ä¸»ç§‘ (Main Subjects)</div>
      <div class="grid-main">
        ${createCard('ortho')}
        ${createCard('neuro')}
        ${createCard('cardio')}
        ${createCard('peds')}
      </div>

      <div style="font-size:14px; font-weight:700; color:#94a3b8; margin-bottom:12px;">é€²éšç§‘ç›® (Advanced)</div>
      <div class="grid-sub">
        ${createCard('modality', true)}
        ${createCard('assistive', true)}
        ${createCard('biomech', true)}
      </div>
    </div>
  `;
  closeSidebar();
  window.scrollTo(0, 0);
}

function createCard(key, isSub = false) {
  const c = categories[key];
  if(isSub) {
    return `
      <div class="subject-card" onclick="renderCategory('${key}')" style="border-top:4px solid ${c.color}; padding:16px;">
        <div style="font-size:24px;">${c.icon}</div>
        <div style="font-weight:700; margin-top:8px; font-size:15px; color:#334155;">${c.name.split(' ')[0]}</div>
      </div>
    `;
  }
  return `
    <div class="subject-card" onclick="renderCategory('${key}')" style="border-top:5px solid ${c.color}">
      <div class="icon-box" style="background:${c.color}">${c.icon}</div>
      <div class="subj-title" style="color:${c.color}">${c.name.split(' ')[0]}</div>
      <div class="subj-desc">${c.name.split(' ')[1] || 'ç‰©ç†æ²»ç™‚'}</div>
    </div>
  `;
}

function renderCategory(catKey) {
  const cat = categories[catKey];
  const items = database.filter(d => d.cat === catKey);

  let gridHtml = items.map(item => `
    <div class="topic-btn" onclick="renderContent('${item.id}')">
      <div>
        <div class="topic-title">${item.title}</div>
        <div class="topic-tags">${item.tags.join(' â€¢ ')}</div>
      </div>
      <div style="color:#cbd5e1">â”</div>
    </div>
  `).join('');

  if(items.length === 0) gridHtml = `<div style="text-align:center; color:#94a3b8; padding:40px;">æ­¤åˆ†é¡è³‡æ–™åº«æ“´å……ä¸­...</div>`;

  mainArea.innerHTML = `
    <div class="cat-header">
      <button class="back-btn" onclick="renderHome()">â† å›é¦–é </button>
      <h2 style="margin:0; color:${cat.color}; font-size:20px;">${cat.icon} ${cat.name}</h2>
    </div>
    <div class="topic-grid">
      ${gridHtml}
    </div>
  `;
  closeSidebar();
  window.scrollTo(0, 0);
}

function renderContent(id) {
  const data = database.find(d => d.id === id);
  const cat = categories[data.cat];
  const tagsHtml = data.tags.map(t => `<span class="badge" style="background:${cat.color}">${t}</span>`).join('');

  mainArea.innerHTML = `
    <div class="cat-header">
      <button class="back-btn" onclick="renderCategory('${data.cat}')">â† å›åˆ—è¡¨</button>
    </div>
    <div class="detail-view">
      <h1 class="detail-title">${data.title}</h1>
      <div style="margin-bottom:24px;">${tagsHtml}</div>
      <div class="detail-body">
        ${data.content}
      </div>
    </div>
  `;
  window.scrollTo(0, 0);
}

function toggleSidebar() {
  sidebar.classList.toggle('open');
  menuOverlay.style.display = sidebar.classList.contains('open') ? 'block' : 'none';
}

function closeSidebar() {
  sidebar.classList.remove('open');
  menuOverlay.style.display = 'none';
}

function toggleTheme() {
  const b = document.body;
  if(b.style.backgroundColor === 'rgb(30, 41, 59)') { // Simple check for dark
     b.style.backgroundColor = '#f8fafc';
     b.style.color = '#334155';
  } els
